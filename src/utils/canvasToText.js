import {
  extractPriceAndCalculateRR,
  extractTimeDateAndDay,
  initWorker,
} from "@utils";

const base64ImageURLForTime =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAisAAAAXCAYAAADKiQ/XAAAGzklEQVR4AeybXahUVRTH/0RJkVBGMlJBiYUYRYncTPSlwChKkegheogy4RIRvQgWdHvoBhUIEREhZUVJ9ZAhWRIYVKSUSfSJESVRUHRvYR8UlQU2v7vdzJ4zc+Z75s6Z+7+w5szee+119v7tNXPW7LXvCfKfCZhA2wSWbTx2zDI3GLTtHCPcwT4/N3yedR42N3awMmwr4vGYgAmYgAkUlICH3S8CDlb6RdZ2TcAETMAETMAEekLAwUpPMNqICZiACRSHgEdqAkUj4GClaCvm8ZqACZiACZjAHCPgYGWOLbinawLFIeCRmoAJmEAg4GAlcPCrCZiACZiACZjAkBJwsDKkC+NhFYeAR2oCJmACJtBfAg5W+svX1k3ABEzABEzABLok4GClS4DF6e6RmoAJmIAJmEAxCThYKea6edQFILB7Ujq0vVqoqzf0OzdI+x+V1q+qbX16c7WNt7ZKK5fV6mHjk20V3clbanU6qeH+CGM7+Hh9+8wrnSvlTu5FH+6F8D4K9rDP/JhnrM9eox66vM+2Mwf4cc22udwbAnCHfyrU1bPOWtrvAxl8Hgml8Ao3OLbj9+jTL1gIr/h70f1+6IKVgNavJjAaBN7/Qrrwtoqsm+hsXod/qNi4ohy8HCjbTS0RvFy/Rnr1vaD3/JvS9K+pRnfvv/9ZGlsqffZNsP/EbunK5aoKrtK5djpPvmQvzwRiBF0//Rbu++FXEvNkvtkZ8YVM3a3lYA6Zf4pEX+oQHoyUqads6R+B1Bfw/079wX7f3O/jKqbMU96j4vcOVuJK+2oCs0jgsV3S6rtCsNHJMEqnS/NOqgQoD74oYbMTW3l9Jp6VNpYDAdq/neJVOrcUrr145Vflx4clHlCpvfS+H30d5lkqzzfV4T2BGl/SBHLIH39JZ59JSwiqrlohvfS2dPS/UOfX2SeAj9rvpW78vtEqrl8ljYrfO1hptNJuM4E+EODXPVuyW8dDSmXvwxLbvKRY4u5A9rZLzgq6bPHSP9vOg/rI79LNa8ODOW3HJrbpixAU0I4dylEYA7/CaEuFAGWiHKikdeyyzDtRikELbeyIYCvPDjqNpN59svrLz5eYJ/OljZ0YWGZ3WpjzojMkdoTQQ59AhgCGsmXwBPA31sp+X82+V35f7/M3Sn7vYKXab1wygZ4SiF8gPMRjkMANSEWcVwpbvGu3NN9R2flu0GWr9+qx2oAEmzyMfzwiPbRJ4qHAA5yH9pYbpef2hv6kRxYvqqRHpn6RqGOrnhRLvWAH26lgd81FISXElyFt//wrkRrCznfT+akadDsVApOFp0nMs5mNDaslApPXDjTTdHs/CLTt9zmDsN9Lrfj9ID5/OUs0sGoHKwND7RvNRQIEFzzAEX5BpQwIINJy3nv6xZ0N0iDo5aVfeJATfKBz702aOWeyYL50+7qwM/PMZqm0oJIeQS/Krv2aSZHk2Y5649eGd9teD1deb7i/knZiS5tgrFQnVYNup8LcsM0uEUEYdqjLnuFhd+jixdIr+yTSQehZBkvAft873vh4M78fxOevdzPqzJKDlc64uZcJdEWAX/1THR6A5cxFmn7JDoQH9L7PJQKGheWA4c+/pbufUtVBXwKgbL9WygQCKy6QsM998vp0M788m9SzU4Jt0lCUs8KuDwdw2WHiPES2vcuyu3dJgLWz37cPsZnfZy12wzlra1jKDlaGZSU8DhPIIUD6iHw/zZzZOFpOudT7wt9xTyU9dOmSkAbZczwNQlqE/o0EHWx/8GV9rRgIkOaZyJxhefk+iUCGnvHejYIZ9FqVdP6XLQ1B2PTxQI8t8pjywh67PgRpT+6hZCkygXTd7feN/b6fn79h8SEHK8OyEh6HCeQQID3DORXOvZDeeGRnbXqDtMjSc8J5lUPbwxfbAy9o5l+ZJ3dI9KM/kj7cSQmRGqIenXq247CuWxlSSOlhX4IF2t/5VNp0TUg1ESxwb+p7IewCEQAxRtJZbxxU3f90ggFzOPXkCoc0ZdSLsdjG4AjY76VW/J4V6efnD/vDIA5WhmEVPIaRJECumQdtdnLsSmTPWVA3dkcILrL6HGKljXMvXCk30kEvtY8+/ahH0rb0gC066GZtxzJjpH8qzJF2Ui6XjIdUU2qftnYFm1lu1MX7Mo5ok/p4P8bOHKIeV8rUR33G2c2/ykY7vuYTYE2y64c26xbXijJCXXaNqEdYN9rqrSPtSKqDXmq/Udso+T0c8OtGnz/ai+73DlZYactsEPA9TcAETMAETKAlAg5WWsJkJRMYPQL8qk1/iY7eDD0jE6glYL+vZVKEGgcrzVbJ7SZgAiZgAiZgArNK4H8AAAD///8iJrAAAAAGSURBVAMA0rrQIEighG0AAAAASUVORK5CYII=";

const base64ImageURLForRR =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAAKKCAYAAAA+zXU/AAAQAElEQVR4AeyZB5wURfbHfzObA7DkJDlHEUkGBJSgnDmdZ/qjfxUD5xnOgKKY9fQ8/udxZzwzZwA8FUSSCpjIUck557TLxgn/erU768zu9O70bIcq9u2H6p6uevXq9e/br6q68YL/lFeAISmPCGBIDEkDBTQIkTOJIWmggAYhciYxJA0U0CBEziSGpIECpkN0vgNnkvOamx6RIZmWzPkODMl5zU2PyJBMS+Z8B4bkvOamR2RIpiVzvgNDcl5z0yMyJNOSOd+BITmvuekRtYdk+o417MCQNIDGkBiSBgpoECJnEkPSQAENQuRMYkgaKKBBiJxJDEkDBTQI0eJM0uCONQyRIWkAjSExJA0U0CBEziSGpIECGoTImcSQNFBAgxA5kxiSBgq4HWIM43MmxSCS2yYMyW0CMYzPkGIQyW0ThuQ2gRjGZ0gxiOS2CUNym0AM4zOkGERy24QhuU0ghvEZUgwiuW3CkCIJKHnFkJTEEhkUQ4rUQ8krhqQklsigGFKkHkpeMSQlsUQGxZAi9VDyiiEpiSUyKIYUqYeSVwxJSSyRQakNKTLWanvFkDRAz5AYkgYKaBAiZxJD0kABDULkTGJIGiigQYicSQxJAwU0CNFMJmlwOydniAxJA64MiSFpoIAGIXImMSQNFNAgRM4khqSBAhqEyJnEkDRQwNYQrXHOmWSNjrZ6YUi2ymuNc4ZkjY62emFItsprjXOGZI2OtnphSLbKa41zhmSNjrZ6YUi2ymuNc4ZkjY62eqlWkGxV0kbnDMlGca1yzZCsUtJGPwzJRnGtcs2QrFLSRj8MyUZxrXLNkKxS0kY/DMlGca1yzZCsUtJGPwzJRnGtcu0iJKtu4eT3w5A0YMyQGJIGCmgQImcSQ9JAAQ1C5ExiSBoooEGInEkMSQMFNAixNJM0iLXahsiQNEDPkBiSBgpoECJnEkPSQAENQuRMYkgaKKBBiN7U158McnFVA3/q60/MSHnt6XZGzwtPd0bKVF5vlYVg4Bnq8fjHGzkUBkZNXO+sAp7BRuMxJCNlnK83ZGHY4HyMPKKRAgzJSBmF6uOC9Hy/Idh+w/3Ive1xWXbe+Ge8fOb5qJGUXOGtDWvWFhuvuwevnnNRhXbUOO13NyBP+Dcq1F6R3abr7sXAJq3IJKLc3b0ftl5/HxZcMRKdatePaDO6uLZdd+y/6eGo8YTfC93/+P4XYu+Ih6Rt9i1j8ONlt+CcJi2NXMdUbxrSmNMH4PYuvVE/LQMeMQSVuqnpGCnqXhKgRFXUfyTI033PQ9OMmlHbzVQWBvyYv2+HmS7S9sne54JKrZRU2X9nzjFZb9Vh3FnDMaLjaaiVnCJdJnq96Fm/Cf4pwNH9y8o4Dl6zfVYc2oudOccxefNq9Jz4qixzd2+F1+NBnwZNo7qjJ+yvZw5D1zoNo7ZHqxz+1QdIe+OpiPL4wm+R7/dh/dFD+GjDqtJuBO35pfMibNtMGIc5u7eU2tza+XTxIPUC/b27dhn+9MM0ZBcV0mXMZc2RAxFjUHx3zJsi+9MsMaRZGxSJB+jfa5ai7YT/w8PzZ+FYYT5a1MjCdSIbpWEcB9OQpmxdh26fjMf1syeBgqby/rrlyKnghukJG9Cklcy8OGKUXQj0pa06yodhyta12HDskKyP5UBP8e1d+ojpOAWfb1mDe3/8OpZupmzOb94O9cSMslI8xKPnz8SuE8fx95U/i/HWgjLq1HqNTPkLNzYNKbxz6Hej9EwkerzYmn00VFV6punlijadsTc3G8sP7imtN/vjxg490EGsIevLZBH5obHvEBBojcy59TGs/P1d+EO7btQkCz3F7WrVxdqjB/Hish9kXTyH5iIjDt08Wq43B8Qa9c65lwnwxetwh6x68Hg8WHVof0SG7hawKLsapdeIZ0jZxyuPVTwMPqUN/MEAZmzfEOGJppjbOvfCr4f349pZk3CkID+i3czFZa07I9mbIMcom0U01WaJdYbWxwQhFAF5qvd5CG0czjulNai+vnjSF4oNA8Hc/T8PxLTZCY8xIzEJ6aJA/GWKTdJVbbripZJ1uLYYn2Dsz8sRrb/923jsMAr8fjn+b7XmflUZ0l1d+6C3WItoXXp99eLS0W8Va8ATvc7Fgv078fuZn2KhOJc2mvzx+7Zd0aV2AzmFfCmm2/Dux8Wcv+LgXjlGg3dewDNL5op1oACNRHaf37ytBNUgLVNOk/XFZoemHoJZOyUNlW12QuPQVH4w7wRe+3WRXGuGTX0fP+/dIX2e3bg56KFISUgMmVt+rhKkPg1Owahu/XBUZMj4VQtKg6NF9KHT+qNOahroN227aSs9qGkraTNC7IBCW2hZUclhePP2qCF2TLN2bCoH+5pZE9HvszfwpVinaCPwrID0/Z6tch0I30n6g0HQWhba7HyzczMI1sAmLXG62IFVFMKXwnfnj/8h1zJaa+aJjdL4XxaI+85DzaQUtM+qi/0CYjQftNOjTI/WFmtdlSA91msAGoqn9L11yyJ2Upe26mTJVptugh6Efo2a4VB+Lr7ato6qKi0H83KlTZaYguQPcTggRKRMp40OlXErf5LCZomMalurjrAw9+9wfh7yfD4kiwyiqS8gHoIkMR03EHqEe2ooMjpJbMVplxdeb+Z33JBoQ3BWoxb4ce82OcWED0rbUtqeli3f7doizWgLTFtseVHJ4eKWHdBYLLpLDuzGjB0bK7EubiZh6Be9KtCTn+cvkmtCqhCU6sNLQKylRYFAeFVMvxumZ4DWpxNiV7sv9wS2iU0TZWa3ug1KNxPkqHvdRkgS8NaJDQ9dx1PigkRT2HXtu+NwQS7Cp7l4AhgotuZr/3A3Dt/8CMb2GhThgrbdoU0JrQERjSUXbw68BF9feIOcVml6e67vYJzduIV8ymmDQWW9EKiu2DTQDpC241RGig1NfbFGHRBZt+rQPumN1lHaUOwQX1CuatNF1tGB7nfhlSPxqHiRpzHo+m4xzdNL8X6xUaD3MRqHMougPCNiILun+5wnYyGQy8RDRr7iKaYhkXD3nHqGnM4okM8vuFZuSWnNoWJmraGAa4q1poaY19MSE9G34SlUVVpo2mxVs7bcMND7TWlDyQ9asGk6JNAUB6199556Jmj6WXpwN94s2ch8Id6NjhcWgHZ5S6+6A1QuatlRvniSXxKYXPas1wS1xfRHQPs3bklVsvQX0Dtm1Qd9baExaCz6kkAbCnpHJCMaa82R/aBsvU08AGT35x5nyVjo6whNtWQXTzEN6fHegxB+A/EMGt6HFuWXV/yIXF+R3MaHt50lxKENw7IDe6K+vNK714wdG7AvNwfBko4k3HTxKvDH778qfV95b91yjF4wS/qgDQTZHinIw1url2Dsom9LekJ+KqK1Zr/wN3vnptJ62rkuE9DpawdVkg+a3p5ZMgevih0f1dGm5ZY5X4D6hezonqaKTcftc6eQSdzFNKQHfpqBzDefLvd5JLT+VLTWUBvZ0ZoVHnGeAFQo3iUW7d8VXo3b536JdPFp6IZvJkfUhy5ImAd/nomWH/5N2pHv+mIbfvn0j+TXkJAdnWkd7P7JP2Xs5LPJey/hgZ9nUFNpIZhN339J+qOHJ9Qwa+cmDPj8bdT+93Pyvun+O370Cl5ZOT9kIs9rxGeji6ZNKLWr+/bzuFq8ftC6KA3iPJiGFOc4ht1ofRjRsSdoehq34idDu+rcYBekmDWlxfiomHr+LDKUMiPmjtXI0HVI18+eBHqDp6miGulu6lZdh2Qq2mpqzJA0AM+QlIEUnGkUCkMyUsbR+uDMYDBhlNGQ3vyRYz1c3NbgiWEFtz+2wRCSUQPXq6MAT3fqsDCMhCEZSuN0g/F4DMlYG2VaGJIyKIwDYUjG2ijTwpCUQWEcCEMy1kaZFoakDArjQBiSsTbKtDAkZVAYB8KQjLVRpoUhGaBQqZohqUTDIBaGZCCMStUMSSUaBrEwJANhVKpmSCrRMIiFIRkIo1I1Q1KJhkEsDMlAGJWqGZJKNAxi0QSSQfTVpJohaQCaITEkDRTQIETOJIakgQIahMiZxJA0UECDEDmTGJIGCmgQYlyZpMF9nVQhMiQNcDIkhqSBAhqEyJnEkDRQQIMQOZMYkgYKaBAiZxJD0kABZ0Ks0iicSVWSz5nODMkZnas0CkOqknzOdGZIzuhcpVEYUpXkc6YzQ3JG5yqNwpCqJJ8znRmSMzpXaRSGVCX5nOlcPSE5o61lozAky6S0zxFDsk9byzwzJMuktM8RQ7JPW8s8MyTLpLTPEUOyT1vLPDMky6S0zxFDsk9byzwzJMuktM+RCpDsu7uTxDND0gAkQ2JIGiigQYicSQxJAwU0CJEziSFpoIAGIXImMSQNFNAgxPKZpEHQ1S1EhqQBcYbEkDRQQIMQOZMYkgYKaBAiZxJD0kABDULkTGJIGihgQYh2u+BMslthC/wzJAtEtNsFQ7JbYQv8MyQLRLTbBUOyW2EL/DMkC0S02wVDslthC/wzJAtEtNsFQ7JbYQv8n4SQLFBFMRcMSTEg0cJhSNFUUayOISkGJFo4DCmaKorVMSTFgEQLhyFFU0WxOoakGJBo4TCkaKooVseQFAMSLRzbIUUblOvMKcCQzOnlijVDckV2c4MyJHN6uWLNkFyR3dygDMmcXq5YMyRXZDc3KEMyp5cr1gzJFdnNDcqQzOnlhHW5MRhSOUnUq2BI6jEpFxFDKieJehUMST0m5SJiSOUkUa+CIanHpFxEDKmcJOpVMCT1mJSLiCGVk0S9CoZUGRMF2hmSAhAqC4EhVaaQAu0MSQEIlYXAkCpTSIF2hqQAhMpCYEiVKaRAO0NSAEJlITCkyhRSoJ0hKQChshB0g1TZ/ZyU7QxJA6wMiSFpoIAGIXImMSQNFNAgRM4khqSBAhqEyJnEkDRQQIMQq5ZJGtzgyRAiQ9KAIkNiSBoooEGInEkMSQMFNAiRM4khaaCABiFyJjEkDRRwOMR4huNMikc1h/swJIcFj2c4hhSPag73YUgOCx7PcAwpHtUc7sOQHBY8nuEYUjyqOdyHITkseDzDMaR4VHO4TzWH5LDacQ7HkOIUzsluDMlJteMciyHFKZyT3RiSk2rHORZDilM4J7sxJCfVjnMshhSncE52Y0hOqh3nWAwpTuGc7KYUJCdvXKexGJIGtBgSQ9JAAQ1C5ExiSBoooEGInEkMSQMFNAiRM4khaaCABiFWkEkaRF9NQmRIGoBmSAxJAwU0CJEziSFpoIAGIXImMSQNFNAgRM4khqSBAlaGaJMvziSbhLXSLUOyUk2bfDEkm4S10i1DslJNm3wxJJuEtdItQ7JSTZt8MSSbhLXSLUOyUk2bfDEkm4S10u3JDMlKnVz1xZBclT+2wRlSbDq5asWQXJU/tsEZUmw6uWrFkFyVP7bBGVJsOrlqxZBclT+2wRlSbDq5asWQXJU/tsGdgxRbPGwVRQGGFEUU1aoYkmpEosTDkKKIoloVQ1KNSJR4GFIUUVSrCf9dVAAAEABJREFUYkiqEYkSD0OKIopqVQxJNSJR4mFIUURRpSoUB0MKKaHwmSEpDCcUGkMKKaHwmSEpDCcUGkMKKaHwmSEpDCcUGkMKKaHwmSEpDCcUGkMKKaHwmSHFDMc9Q4bknvYxj8yQYpbKPUOG5J72MY/MkGKWyj1DhuSe9jGPzJBilso9Q4bknvYxj8yQYpbKPUOG5J72MY+sLaSY7/AkMGRIGkBkSAxJAwU0CJEziSFpoIAGIXImMSQNFNAgRM4khqSBAhqEaFEmaXCnGofIkDSAx5AYkgYKaBAiZxJD0kABDULkTGJIGiigQYicSQxJAwXcCtHEuJxJJsRyy5QhuaW8iXEZkgmx3DJlSG4pb2JchmRCLLdMGZJbypsYlyGZEMstU4bklvImxmVIJsRyy5QhFSuv9JEhKY2nODiGVKyD0keGpDSe4uAYUrEOSh8ZktJ4ioNjSMU6KH1kSErjKQ6OIRXroPSRISmNpzg4NSEVx8bHEgUYUokQKp8Yksp0SmJjSCVCqHxiSCrTKYmNIZUIofKJIalMpyQ2hlQihMonhqQynZLYGFKJECqfYoGkcvzVIjaGpAFmhsSQNFBAgxA5kxiSBgpoECJnEkPSQAENQuRMYkgaKGBLiNY65UyyVk9bvDEkW2S11ilDslZPW7wxJFtktdYpQ7JWT1u8MSRbZLXWKUOyVk9bvDEkW2S11ilDslZPW7xVC0i2KOegU4bkoNjxDsWQ4lXOwX4MyUGx4x2KIcWrnIP9GJKDYsc7FEOKVzkH+zEkB8WOdyiGFK9yDvZjSA6KHe9QLkCKN9Tq248hacCeITEkDRTQIETvw48+F+TiqgZ+of+MMWNebGf0vPB0Z6SMc/XEYKgv6BtvNCQZGLVxvbMKDDYajiEZKeN8vSELwwbnY+QRjRRgSEbKKFTvjSeW4eefi0dH/wnPPT1aljGP3IOLLhyClJTkCt11aN8GDz84CldcNrxCu7KNp/XoivvvHYmH/nwXyEd4O4152SUX4PFH75WxPPvUw7j/npHodfqp4Wbo16cnHrjvDlA7xf3Yo7HFTE5uuekPeP6Z0YaF2skuFMvYMfdJ22efegh33TECrVs1p+a4i+lMGnxuf5zR73RkZqTD44EsGelpQoTTceFww7UPDRrUw/lDB6JWzRow89e3z2m4WDwAdWrXxq7de7F37/6I7sOETwKSlpYqY/F6PahXrw6GDRlQCvTU7p0xZMg5qFMnC9ROcaenpaFv754YNOCsCH9mL/x+P7Zt3yW7XXzhUPlwpKamyGuv14tTmjbGZZdeIO9fVsZxMA1p9569OHrsOFauWoNxr7wpy+bN24RAHjRv1jRqCPSEXfS7IWjYsEHUdqNKyppBA89CcnIKVq9Zj4mTp+DY8ewI81Ytm4uxIdo34IUXx2Pyf6chJ+cECFoontatWiAtNQ0HDx3GO+99gldff18IuxMJCSRiowh/0S7eeucjjB7zfESZMWsOfD4fDhw8jGUrfpEPRPt2rREI+LFw0XIZy7Tp3yI/Px+1s7LQs0e3aK5jqjMNafWaDXh53Ov46JPPsX//QVkWL12JwsJCwwHpCSOh6Ak2NCrTQGD7n91XZt6Wrdsx6bOpKCiIPkZRURHWrd8oAS5esgL79h0o4634cseO3Vi/YTO279iFTZu2gbKguMXckWLr0rmDeDg8WL16PQ4KUB06tEGGmF1279mHadO/kbF8/8MC/PLrOpG9XjRp0tDcIGHWpiGF9S39WaNGpgzk8JGjpXWhH0PFtNO9Wydk5+Rgt5iuQvWVnU8T61CzUxrjeHYO6GaNABHAxMREdOvaSa6JNK3WyqqJEydysXnLNjkMnfPy89C6dQv5xFMlTYnBIERG7aJLU+X0nt3RoH690iyizg3q1RUnj5iOD0Q8TMeP58jsIo2EQVz/LIHUvm0rBIMB8TRvigiC1hNasPeKJ/s/H/0XeXn5Ee0VXdDUkZycLKakBFx/7eVyIX7y8ftxzdWXyOwK9Z0xc47MDpr2/njXzWL9GirXy4WLl2OTmIbJbsXK1fjp58VIEf6o/43XX4l2IuaNm7Zg3g/zycRU6dalo4xr3bpNMouoM02vNNXRVEvXoUJTrM/nh9fMNBLqXHKuMqQzz+iFZs2aSEHmL1ha4hYgQEMHD5BTy4cTJstzaWMMP+rWqS2taFNCmUIXBK17t8644vLf0aUsLVs0kxsFWl+oTxuRLYAHCd4EhP5oeqIFnPrTot6pYztQncfjQWpKSsgspnOPU7ugYcP6OH78OFaLdTLUKRRj6NrKc5Ug0cJ89pm9ZYb8+NOi0rhCC3662PXRb9p20xa2TZuW0oZ2Y6Ftq6wwOMjpaNtOvPnvCXIhXrpslZg6AmjatJGY3jpKoQef1x9169TBHrEWfPb519iydYfYaCSh/9l9MFjsRMk17QDbt2uDPLGIz5o9D0vkGloEqgsHTraVlY4d2opxU0T2bol48MpmUMgPPRQej9gGhyriOFcJEgmUmZmJxUtWykwKjd+1S4eIKSlUb/ZcVFQI2pRs3rJdLsRfTp2Jw4ePIDkpWa4JPU/rJs+HjxzBxxO/xCIxxb3x1odyavN4vOjUsa3MsvZtW4tNgg/fzfkR34oy6bOv5EbkRG5uKfBYYqOHskXzpsgV/das3RDRJSieKK/I3szMjIj6GkKfhASvfEAiGkxcxA2JNgQ01WzdtgOzv/0+YkjaBpfdstL1pk1bpR3twGhbKy8MDvTUAx4kJSWi7B8JUiS2v5kZGSAB6CmmnWbIbp/Ydfr9PtAURO9l5KOgsEgA/m1js1HEkpebB5oWyS7Ut6Jz507tUaNGDezctafc+nvk6DFQwjRqVF9k2m8v9Y0bN4DXm4ADBw5V5LrCtrgg0RRGT3FuXh7Cp7kKRzJopDXkwfvvxFNjH8CQweeUWu3de0AC6iV2Uq3FGzuJPfz881C7di2xeyqQ2+ycEydEhojpr0kj0FcHsunSuT3OEutkstgk+ATIY+K9qqjIh4z0dAzo30++/dMO8IrLfidebmvDL95ryI4GpnWUvkSMEV9T6AWY6kKF1rB27Yo3SNu27wxVl57pfYnGadK4Ic4fNkjOJDTNthLvcTQj0It4qbHJH6YhUbD9S95fSJQRN14td1605lCJZa0Jj5HmbPJJT3uLsJfhVb+sEYtztni/aIRb//c60LrWp3cP+VTSu8669ZuwYeMWHBLTH2UCtZHN9ddegUaNGsgXzTVrN8rd1xbxnkXZ16LFKdLXvXffKtc0r9eLXbv2YtUva2VItLmgLxHpAmgrIa6sLDl0FTu6unWycOxYtnz3KakuPS1YuBT79h+Q2Us7Wopl4DlniPUxWW7zwzdVpZ1i/GEaEj3tZW8gxrGimv0qXgbnfj8fReKFNCDm9ZARbZ9pI0BTSyAQkNX0wrxy1WrQ2kQV9BI59atZcgEPZUMgEMSRI8fkFByahqdOm43l4qsAvQLQEFToN9VNFusT+aKyTXzeyRVTIGXoho2bqaq0tBSAk8WXD8oIGre0oeQHvcdNnDxVPjihWOie1qxdj/AxSsxNnUxDmvrVbDz6+AugNSZaqWitoTbqQ2tWeJR0Mz7xLrFDfBEIr18vvg7889V3xXh/keONfeplfCI2CCRIyI42FfSZ57EnXpI2FNuLL/8Lc+f99v5D9iTgU8+OwyOPPS8L/f500hS5IQn5orXy6ef+D8+98Aro4QnV05lipr70pYWuo5X9Yi18+92PEYrl8Sf/ig8mTI4YI1q/yupMQ6rModl2Wh969+ohP57G82Jpdjwd7V2HdN6gs+V71pSvZokNQfRvczoKa2XMrkOi6YNeVmmqsPLGTiZfrkM6mcS0614Ykl3KWuhXf0gWiuGyq5lG4zMkI2WcrZ+Z6EkcZTSk94VnH/FwcV2DYc8882DkF9swYpxJYWKo+pMhqUomLC6GFCaGqj8ZkqpkwuJiSGFiqPqTIalKJiwuhhQmhqo/rYak6n1qHRdD0gAfQ2JIGiigQYicSQxJAwU0CJEziSFpoIAGIXImMSQNFHA9xMoD4EyqXCPXLRiS6wgqD4AhVa6R6xYMyXUElQfAkCrXyHULhuQ6gsoDYEiVa+S6BUNyHUHlATCkyjVy3YIhlUGg4iVDUpFKmZgYUhlBVLxkSCpSKRMTQyojiIqXDElFKmViYkhlBFHxkiGpSKVMTAypjCAqXjIkFamUiUlxSGWiraaXDEkD8AyJIWmggAYhciYxJA0U0CBEziSGpIECGoTImcSQNFBAgxBNZZIG93NShsiQNMDKkBiSBgpoECJnEkPSQAENQuRMYkgaKKBBiJxJDEkDBewN0RLvnEmWyGivE4Zkr76WeGdIlshorxOGZK++lnhnSJbIaK8ThmSvvpZ49x7vMyTIxUUNeg/xH+szZMaxvkPaGRHlTDJSxql6D7weYCiCGA+DP4ZkIIzT1Z4gBhuNWb0gGamgQr0HhiwMG8B/yijAkJRBYRxIXJBS7r4VmdM/RY35M2TJnDERKfffCU96mvFIoiXxzN7InPIfpD56n7iK/V/SBechY9I7yPjiQ5CPaD1p7NQnH0bmd18gdewD0UxkXfK1VyBz2sfI+PA1eFu1kHVmDjRO2guPIWPCa+W6UVvq6HuQ+c1/UWPBTNT46WukvzseCT1PLWdrpsI0pJRbb0DyVZfAUzsL8Ih9iSierFpIvvJipNx3J4z+SJCUu/4Xngb1jEyi1iddfiFS7r8L3qaNEVi7Af6NW8rZkThpfxmLpGGDgNxc+JetKmdDFSl33AQqnhqZ8K/8FcF9+6k65kL3kPby00gceDaQkFCuX8oDo5B08fnwZGYUtwmbhE7tkfrIPXE9EMVOYLxYhQzKnv3rNiGw7wB8s+fixDW3yuJfsgIELKFrR0T7IxFT77sD3jatojUb1lHWpNx0LTwZ6fDN/RH5T76I4P6D5exJnIRePRA8dBgF499C0ZfTy9kQ7KQrLpL11J7/4j8QzM2T17EcSPz0V54XWdEddK8o80exJvbrBfh8KPp8GnIuuhYFr7yBYHYOvI0bImm44eatjKfyl6YzyTfvJ5y48ibkPfosAlu2yVI0ZQaCefnlvZfUhESMdnMlJuVOBDb5uqtk5vmXrkT+U39FNFFJ+MRzzpRtBW//B0Vff1POF2WAzP6MDBR9+wPyXzJ8JSnXlyroAUi57UZ46tZGYMcuwO+n6oiSeFZfeLKy4F+/CQV/f10+TIUTJsE350dQ1nk7tI2wN3NhGlI05556deBJ8CKwe2+5ZppekgYPQPDgYfjXbSzXblSRKJ48b5cOot8hFE6YKCFEs00aOgiedJFpPyxA0eQp0UzkU+xt3hSBrdtR+O5HUW0qqwwcOISC196Fb+YcIBAsZ+5t0QzwiCYxHYc/TDLzfX54hUaI888SSIl9T0cwEIDvp4URYYSmGFpH8kY/DRzPjmiv6IKmDk9aGpCYCFpvaCHOnH9HddoAAAbYSURBVPMF0p55RGYXxF/ieefA27oF4CtC4hm9IDcyP09HxsS35dogTOS/BBEfvAnw1K4lF3yyy5w1Wax1dwrAYgxpZXzwL16O3Jv+iML3PzE2qllDxOFH8NCRCBvKvGBREeD1RtSbuYi/Z8koyb+/FF6xFvkXr0DRpN+eZAKUcvsI+FetQd5DT8L/y5qSHrGdvKc0kYa0KUFycvFvAS1RZGXqmPvldYJY4yRI0e6pVRPweEBieJufgpS7b0PSRcOQ0KsHvHWyRL1HQBJnsZiTnUeIWtlmByb+PMlJJqzNmVYJUkLXTki65nKRITko/Piz0pFpEZULvhCOftO2mzIhofdp0kYuwuP/In9XeAgG4V/xK3LveEAuxEXTZoHWA9oxURaF+gZzTqDgzQ+QM+gS5I15Tk67tINLHHBmyETMQyLT54r1tGSz41u4VLR5JMSEzh1Q1b/g4aNRXcidHj08UVtjq6wSpGSxmHrFYlo0ZTr8YkoIDZk4qH/plBSqi+cczM+H9L10hVyIC8SCH9i5B57UVHhbNi91GRBrXeFbH8h1yzdrDnwzvgWKfPA2aVRqQyIWTfpSbnRow1P0wacIHj4Cgult1rTULu4fYrpHophShR7hPmiz4RFTdjD7RHi1qd9xQ6INQWKPrvAt/0U+xeGj5j/7N2T3HVqu+Bctk2a0Bc4d9ZD8bXQovikxRQkg5WyCAaCwEMEjRxEUW14kRZ9qgmLBpoU7WFAIiI0NUoqnzQh/Qtwg+YioNH8R2LMPNI1627aKWOe87duA4AW27UC8f954OtIUljR8CILHslEUNs3F44vWjIzPP0CNeVOQMnJEqYvAxs3wpKQgkdYV8cZOL8EpfxopsqMhgidyEdi0Bf4160UMx+Bt1xopo26R4iQOPAuUySFhAtt3ggTy1KqFpKvF+im+MtCWPEm8fHvqZAnQxxDYsFmOS+sobSgyp09E4pCBsi7WA42DggIkCCgyFvHSnnLnzUg4rTtoRvCvXR+rq3J2piGFv7+QcGnjngWtN6GSPv4v5QapqILmbPIJASShW6dS06Jv5iF44CASxPtF+qsvyc9JSZcOB+32fPMXi53kIrkZ8S9aLmAmI/mGq+UnIdoJels2E30Pwff1bOnP990PAuwJJPbpiYyP35RFrlcig3zffQ8psLCktY42FJ6smkjsKV5aRV2s/2j779+8DRCbGHp3o3U4+X+ugSctFf6VqyM2VbH6DNl5Qz9iPSffPqL4rTvWDpXY+cTLXiGtD/kFchsfMqc1Lv+5cTJbaLNA9cG8PBSJ9xRam+iaSsHf/oVCsdYEaXsvNhoQ0xeJXvCvf0uQZFMkXrbp7Z/qqR3CjuwLP5uKglffIRNZ5KeiY8dBa5VvwRJZF+uB3o3yn3wJsp+YiqlfUNyTb97PyH/mZbqMu5iGVPC3V5F9xvnl1pvQGlTRWkNtZEdrVkTE4mYg3iUCv6yNqKaMyR0xCtlnXiDHyxl4CfLHviA3CCFDEqfg5X8hZ8gVyO43DBTbiatuLvflgdZBqqd2siP7gnGvhdzIM8HMGXolcoZfA3p4ZGWZQ8Eb7yH77OE4IXaJZZrkpiTv7tHI7n9hcbwDLkLeg0+A1kVU4c80pCqMFbWrXB8uuQCBNetR+OGnUW2qe6XrkFJuuV58hMxGvshQyorqDiTa/bsOiT7U0ssqvbtEC5DrEPZfFayGsgq4nknKKqNQYAxJERhBYKZRKAzJSBkH6yUgD0YZDemtuXCWh4u7GtRaOGtYrQWzNhhCMmrgenUU4OlOHRaGkTAkQ2nUaWBI6rAwjIQhGUpTeYNTFgzJKaWrMA5DqoJ4TnVlSE4pXYVxGFIVxHOqK0NySukqjMOQqiCeU10ZklNKV2EchlQF8ZzqypCcUroK45xEkKqgguJdGZLigCg8hkQqKF4YkuKAKDyGRCooXhiS4oAoPIZEKiheGJLigCg8hkQqKF4YkuKAKDzbIJFzLtYowJCs0dFWLwzJVnmtcc6QrNHRVi8MyVZ5rXHOkKzR0VYvDMlWea1xzpCs0dFWLwzJVnmtcc6QrNHRCi+GPhiSoTTqNDAkdVgYRsKQDKVRp4EhqcPCMBKGZCiNOg0MSR0WhpEwJENp1GlgSOqwMIyEIRlKo04DQzJioVA9Q1IIhlEoDMlIGYXqGZJCMIxCYUhGyihUz5AUgmEUCkMyUkaheoakEAyjUBiSkTIK1TMkhWAYhaILJKP4q0U9Q9IAM0NiSBoooEGInEkMSQMFNAiRM4khaaCABiFyJjEkDRTQIMT4MkmDGzuZQmRIGtBkSAxJAwU0CJEziSFpoIAGIXImMSQNFNAgxP8HAAD//0qJOh0AAAAGSURBVAMAuFLT55XnFsIAAAAASUVORK5CYII=";

const reduceDimensions = (canvas) => {
  canvas.width = canvas.width - canvas.width * 0.2;
  canvas.height = canvas.height - canvas.height * 0.2;

  canvas.width = canvas.width - canvas.width * 0.3;
  canvas.height = canvas.height - canvas.height * 0.3;
};

const cleanAndCreateCopy = (canvas) => {
  const shallowCanvas = document.createElement("canvas");
  shallowCanvas.width = canvas.width;
  shallowCanvas.height = canvas.height;

  const cxt = shallowCanvas.getContext("2d");
  cxt.drawImage(canvas, 0, 0);

  reduceDimensions(shallowCanvas);

  return shallowCanvas.toDataURL();
};

export async function extractText(mode = "price") {
  const ocrWorker = await initWorker();

  console.log("Start");
  console.time("time");

  const url = mode === "price" ? base64ImageURLForRR : base64ImageURLForTime;

  const {
    data: { text },
  } = await ocrWorker.recognize(url, "eng", {
    tessedit_char_whitelist:
      "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789: ",
    preserve_interword_spaces: 1,
  });

  const extract =
    mode === "price" ? extractPriceAndCalculateRR : extractTimeDateAndDay;

  const data = extract(text);
  console.log(data);

  return data;
}

// console.time("ex");

// const canvas = document.createElement("canvas");
// const ctx = canvas.getContext("2d");
// const img = new Image();
// img.src = base64Image;

// img.onload = () => {
//   canvas.width = img.width;
//   canvas.height = img.height;

//   // Apply GPU-accelerated filters
//   ctx.filter = "grayscale(100%) contrast(200%)";
//   ctx.drawImage(img, 0, 0);

//   try {
//     canvas.toBlob(async (blob) => {
//       const text = await extractText(blob);
//       console.timeEnd("ex");
//       console.log(text);
//     }, "image/png");
//   } catch (error) {}
// };
